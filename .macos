#!/usr/bin/env bash

# Close any open System Preferences panes, to prevent them from overriding
# settings weâ€™re about to change
osascript -e 'tell application "System Preferences" to quit'

# Ask for the administrator password upfront
sudo -v

# Keep-alive: update existing `sudo` time stamp until `.macos` has finished
while true; do
  sudo -n true
  sleep 60
  kill -0 "$$" || exit
done 2>/dev/null &

# Speed up Mission Control animations
defaults write com.apple.dock expose-animation-duration -float 0.1
# macOS settings for optimal experience
defaults write com.apple.spaces spans-displays -bool false
defaults write NSGlobalDomain _HIHideMenuBar -bool true
defaults write com.apple.dock autohide -bool true

echo "Done. Note that some of these changes require a logout/restart to take effect."
